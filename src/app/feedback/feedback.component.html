<div fxLayout="column" fxLayoutAlign="space-around start">
  <div *ngFor='let feedback of feedbacks'>
    <md-card>
      <md-card-content>
        <p>
          {{ feedback.description }}
        </p>
      </md-card-content>
      <md-card-actions fxLayout="row" fxLayoutAlign="end center">
        <div *ngIf="!feedback.isOwned">
          <button md-button class="icon-button"><md-icon>comment</md-icon></button>
          <button md-button class="icon-button" (click)="feedback.voteUp()"><md-icon [style.color]="feedback.getThumbUpColor()">thumb_up</md-icon></button>
          <button md-button class="icon-button" (click)="feedback.voteDown()"><md-icon [style.color]="feedback.getThumbDownColor()">thumb_down</md-icon></button>
        </div>
        <button *ngIf="feedback.isOwned" md-button class="icon-button" (click)="onDelete(feedback)"><md-icon>delete</md-icon></button>
        <md-icon color="primary">{{ feedback.getScoreIcon() }}</md-icon>
      </md-card-actions>
    </md-card>
  </div>

  <button *ngIf="!isNewFeedback" md-fab md-tooltip="Add feedback" mdTooltipPosition="after" (click)="openNewFeedback()"><md-icon>add</md-icon></button>
  <form *ngIf="isNewFeedback" (ngSubmit)="onSubmit()" #fbForm="ngForm">
    <md-card fxLayout="column">
      <md-input-container>
        <textarea #description mdInput [(ngModel)]="feedbackNote.description" required rows="8" maxlength="300" name="description" id="description"
          placeholder="Feedback"></textarea>
        <md-hint>{{feedbackNote.description.length}} / 300</md-hint>
      </md-input-container>
      <md-card-actions fxLayout="row" fxLayoutAlign="end center">
        <button md-raised-button color="accent" type="submit" [disabled]="!fbForm.form.valid">Add</button>
        <button md-raised-button color="warn" (click)="isNewFeedback=false">Cancel</button>
      </md-card-actions>
    </md-card>
  </form>
</div>